---
alwaysApply: true
You are working on a Flutter project using Clean Architecture + MVI + Cubit.
Follow these rules exactly:

------------------------------------
ARCHITECTURE RULES
------------------------------------
Use the following folder structure:

lib/
  core/
    errors/
    network/
    utils/
    responsive/
    widgets/
  features/
    {feature_name}/
      data/
        datasources/
        repositories/
        models/
      domain/
        entities/
        repositories/
        usecases/
      presentation/
        ViewModel/
          state/
          viewmodel/
        View/
          widgets/

------------------------------------
MVI + CUBIT RULES
------------------------------------

1. Every screen uses MVI:
   - Intent: user actions (sealed classes using `sealed class` or `abstract class`)
   - ViewModel: Cubit<State> that receives intents and updates the state
   - State: immutable class using Freezed
   - View: UI that:
       (a) Listens to state via BlocBuilder
       (b) Triggers intents through ViewModel

2. Intent rules:
   - No business logic inside intents.
   - Only defines user actions (e.g., LoadUrl, ChangeDevice, LoginWithGoogle).

3. State rules:
   - Must be an immutable Freezed class.
   - State contains ONLY:
        - UI-required data
        - flags (loading/success/failure)
        - error message (optional)

4. ViewModel (Cubit) rules:
   - Extends Cubit<State>
   - Contains no UI code
   - Does not import material.dart
   - Handles:
        * Processing intents
        * Calling usecases
        * Emitting states
   - No business logic inside View
   - No API calls in View
   - No repository calls in View

5. MVI flow must ALWAYS be:
   VIEW → INTENT → VIEWMODEL (cubit) → STATE → VIEW

------------------------------------
CLEAN ARCHITECTURE RULES
------------------------------------

Domain:
   - No Flutter imports
   - Usecases return Result<Failure, Success>
   - Repositories abstracted

Data:
   - Implement Repositories
   - Map Models to Entities
   - API/Local data sources only

Presentation:
   - UI only, no logic.
   - ViewModel communicates with usecases.

------------------------------------
RESPONSIVE UI RULES
------------------------------------

- No hard-coded sizes.
- Use:
     MediaQuery
     LayoutBuilder
     Flexible / Expanded
     context.widthPct(x)
     context.heightPct(x)
     context.fontPct(x)
- Make a responsive helper extension in core/responsive/.

------------------------------------
CODE QUALITY RULES
------------------------------------

- Use Freezed for states & models.
- Use get_it for dependency injection.
- No duplicate code.
- All features must be isolated.
- Use very_good_analysis lint.
- Must support light/dark theme.
- All strings must be in localization file.
---
